cm <- confusionMatrix(predicted_class, actual_class)

precision <- cm$byClass["Pos Pred Value"]
recall <- cm$byClass["Sensitivity"]

# Handle NA values by checking before calculation
if (!is.na(precision) && !is.na(recall) && (precision + recall) > 0) {
  f1_score <- 2 * precision * recall / (precision + recall)
} else {
  f1_score <- NA
}
