import io
import js
import pyodide
from js import Blob, URL

# Step 1: Convert results_df to CSV in memory
csv_data = results_df.to_csv(index=False)
csv_bytes = csv_data.encode('utf-8')

# Step 2: Create a Blob and download link
blob = Blob.new([pyodide.to_js(csv_bytes)], { "type": "text/csv" })
url = URL.createObjectURL(blob)

# Step 3: Trigger the download
link = js.document.createElement("a")
link.href = url
link.download = "multinomial_model_results.csv"
js.document.body.appendChild(link)
link.click()
js.document.body.removeChild(link)
